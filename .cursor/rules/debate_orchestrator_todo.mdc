---
description: debate_orchestrator ê°œì„ ì‚¬í•­ todo list
globs:
alwaysApply: false
---
ì•„ë˜ ì½”ë“œë¥¼ ê¸°ì¤€ìœ¼ë¡œ **ì˜¤ë¥˜/ë²„ê·¸ â†’ íë¦„ ë‹¨ìˆœí™”(ì„¤ê³„) â†’ ì•ˆì •ì„±/ê°€ë…ì„± â†’ í…ŒìŠ¤íŠ¸ì„±** ìˆœìœ¼ë¡œ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤. ê¸‰í•œ ê²ƒë¶€í„° ê³ ì¹˜ì‹œë©´ í† ë¡ ì´ ì¤‘ê°„ì— ë©ˆì¶”ê±°ë‚˜ ë¹„ì •ìƒ ì¢…ë£Œë˜ëŠ” ë¬¸ì œë¥¼ ì¦‰ì‹œ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## 1) ë‹¹ì¥ ìˆ˜ì •í•´ì•¼ í•˜ëŠ” **ëª…ë°±í•œ ë²„ê·¸**

1. **ë¬¸ë²• ì˜¤ë¥˜(Indentation / stray except)**

   * `_conduct_clash_round()` ë‚´ë¶€:

     ```python
     enhanced_analysis['round_type'] = 'ì§ì ‘_ëŒ€ê²°'
                         
                         challenge_msg = self.response_generator.generate_dynamic_manager_response(
         context_info, enhanced_analysis, panel_agents, round_number
     )
     ```

     ìœ„ `challenge_msg` ì¤„ì˜ ë“¤ì—¬ì“°ê¸°ê°€ ê¹¨ì ¸ ìˆìŠµë‹ˆë‹¤. ì •ìƒ ë“¤ì—¬ì“°ê¸°ë¡œ ìˆ˜ì •í•˜ì„¸ìš”.
   * `_conduct_evidence_round()` ë‚´ë¶€:
     `if False:` ë¸”ë¡ ë‹¤ìŒì— **ëŒ€ì‘í•˜ëŠ” tryê°€ ì—†ëŠ” `except`** ê°€ ë‚¨ì•„ ìˆìŠµë‹ˆë‹¤. ì´ ì „ì²´ `if False:` ë¸”ë¡(ë…¼ìŸ ì‹¬í™” ë¹„í™œì„±í™”)ê³¼ ê·¸ ë’¤ì˜ `except` êµ¬ë¬¸ì„ í•¨ê»˜ ì œê±°í•˜ê±°ë‚˜, í•„ìš”í•˜ë‹¤ë©´ `try/except` ë¥¼ ì˜¨ì „íˆ êµ¬ì„±í•˜ì„¸ìš”. í˜„ì¬ ìƒíƒœëŠ” **ì‹¤í–‰ ë¶ˆê°€**ì…ë‹ˆë‹¤.

2. **ë°˜í™˜ íƒ€ì… ë¶ˆì¼ì¹˜ (ë…¼ë¦¬ ì˜¤ë¥˜)**

   * `_conduct_clash_round()` ìƒë‹¨ì—ì„œ `len(panel_agents) < 2` ì¸ ê²½ìš°:

     ```python
     self._conduct_normal_round(round_number, panel_agents, analysis)
     return   # (í˜„ì¬ëŠ” ë°˜í™˜ê°’ ì—†ìŒ â†’ None)
     ```

     ì´ ë©”ì„œë“œëŠ” `bool` ì„ ë°˜í™˜í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì˜ˆ:

     ```python
     return self._conduct_normal_round(round_number, panel_agents, analysis)
     ```

     ë¡œ ë°”ê¿” ì¼ê´€ë˜ê²Œ `True/False` ë¥¼ ë°˜í™˜í•˜ì„¸ìš”.

3. **íŒ¨ë„ ì‚½ì… ìœ„ì¹˜ ì œì•½ ë¶ˆì¼ì¹˜**

   * ì£¼ì„ì€ â€œ**ì²« ë²ˆì§¸ë‚˜ ë§ˆì§€ë§‰ì´ ì•„ë‹Œ ì¤‘ê°„ ìœ„ì¹˜**â€ë¼ í–ˆì§€ë§Œ ì‹¤ì œ êµ¬í˜„ì€ ë‹¤ìŒê³¼ ê°™ì•„ ë§ˆì§€ë§‰ì—ë„ ë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

     ```python
     insert_position = random.randint(1, len(panel_agents))  # ë(index == len) í¬í•¨
     ```

     ìˆ˜ì •:

     ```python
     insert_position = random.randint(1, len(panel_agents) - 1)
     ```

4. **ë¯¸ì‚¬ìš© ë³€ìˆ˜ ë° ì£¼ì„ ë¶ˆì¼ì¹˜**

   * `conduct_dynamic_debate()` ì—ì„œ `intervention_threshold` ë¥¼ ì •ì˜í•´ ë†“ê³  **ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.** ì‹¤ì œ ê°œì… ë¡œì§(ì¡°ê¸° ì¢…ë£Œ/ì—°ì¥)ì— ë°˜ì˜í•˜ê±°ë‚˜, ìµœì†Œí•œ ì œê±°í•˜ì—¬ í˜¼ë€ì„ ì¤„ì´ì„¸ìš”.
   * â€œ2ë¼ìš´ë“œ -> 1ë¼ìš´ë“œë¡œ ì¶•ì†Œâ€ ê°™ì€ **ì£¼ì„ì´ ì½”ë“œ ë™ì‘ê³¼ ìƒì¶©**ë©ë‹ˆë‹¤. ì£¼ì„ì„ ë™ì‘ê³¼ ë§ì¶”ê±°ë‚˜ ì œê±°í•˜ì„¸ìš”.

5. **ì¶œë ¥ ê²½ë¡œ í˜¼ì„ **

   * ì½˜ì†” `print()` ì™€ `presenter` ê°€ **í˜¼ì¬**ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì¶œë ¥ ê²½ë¡œê°€ ë‘ ê°ˆë˜ë©´ UI/ë¡œê¹…ì´ ìì£¼ ê¹¨ì§‘ë‹ˆë‹¤. í—¤ë”/êµ¬ë¶„ì„  í¬í•¨ **ëª¨ë“  ì¶œë ¥ì€ `presenter` ë¡œ ì¼ì›í™”** í•˜ì„¸ìš”.

---

## 2) **íë¦„ ì œì–´ ë³µì¡ë„**ë¥¼ ë‚®ì¶”ëŠ” êµ¬ì¡° ë¦¬íŒ©í† ë§

í˜„ ë¡œì§ì€ `if/elif` ê°€ì§€ì¹˜ê¸°ì™€ ì—¬ëŸ¬ â€œë¼ìš´ë“œ íƒ€ì…â€ì´ ë’¤ì„ì—¬ ë³µì¡ë„ê°€ ìƒìŠ¹í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì•„ë˜ ë‘ ë‹¨ê³„ë¡œ ë‹¨ìˆœí™”í•˜ë©´ **ê°€ë…ì„±/ì¶”ë¡ ê°€ëŠ¥ì„±/í…ŒìŠ¤íŠ¸ì„±**ì´ í¬ê²Œ ê°œì„ ë©ë‹ˆë‹¤.

### 2.1 ìƒíƒœ ëª¨ë¸ ì •ê·œí™” (ë‹¨ì¼ ì†ŒìŠ¤ ì˜¤ë¸Œ íŠ¸ë£¨ìŠ¤)

`all_statements: List[dict]` ëŒ€ì‹  **ëª…ì‹œì  ë°ì´í„°ëª¨ë¸**ì„ ë‘ì„¸ìš”.

```python
from dataclasses import dataclass, field
from typing import List, Literal, Optional

RoundType = Literal["initial", "normal", "provoke", "clash", "angle_change", "evidence", "final"]

@dataclass
class Statement:
    agent_name: str
    round_no: int
    round_type: RoundType
    content: str

@dataclass
class DebateState:
    topic: str
    phase: Literal["intro", "debate", "conclusion"]
    round_no: int = 0
    round_type: RoundType = "normal"
    temperature: Literal["cold","stuck","neutral","heated"] = "neutral"
    last_round_type: Optional[RoundType] = None
    last_change_angle_round: int = -10
    statements: List[Statement] = field(default_factory=list)
```

* ì¥ì : **ìƒíƒœ ë° ê¸°ë¡ì˜ ë¶ˆë³€ì„±/ì¼ê´€ì„±** í™•ë³´. í›„ì²˜ë¦¬(ìš”ì•½/ê²°ë¡ )ë„ ë‹¨ìˆœí•´ì§‘ë‹ˆë‹¤.

### 2.2 ë¼ìš´ë“œ ì „ëµ(Strategy) ë¶„ë¦¬

ë¼ìš´ë“œ ë³„ ë¡œì§ì„ ê°ê°ì˜ **ì „ëµ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬**í•©ë‹ˆë‹¤. `next_action`(LLM ë¶„ì„ ê²°ê³¼)ì„ í‚¤ë¡œ ë§¤í•‘í•˜ê³ , ì‹¤íŒ¨ ì‹œ í´ë°±ì„ ì¼ê´€ì ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```python
class RoundContext(Protocol):
    def ask(self, agent, context: str, statements: list[str]) -> str: ...
    def say_as_manager(self, msg: str) -> None: ...
    def ui_break(self) -> None: ...

class RoundStrategy(Protocol):
    def run(self, state: DebateState, panel_agents: list, analysis: dict, ctx: RoundContext) -> bool: ...

class NormalRound(RoundStrategy): ...
class ProvokeRound(RoundStrategy): ...
class ClashRound(RoundStrategy): ...
class AngleChangeRound(RoundStrategy): ...
class EvidenceRound(RoundStrategy): ...
```

ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°ëŠ” ë‹¤ìŒì²˜ëŸ¼ ì‹¬í”Œí•´ì§‘ë‹ˆë‹¤.

```python
STRATEGIES = {
  "continue_normal": NormalRound(),
  "provoke_debate": ProvokeRound(),
  "focus_clash": ClashRound(),
  "change_angle": AngleChangeRound(),
  "pressure_evidence": EvidenceRound(),
}

action = (analysis or {}).get("next_action", "continue_normal")
strategy = STRATEGIES.get(action, STRATEGIES["continue_normal"])
round_completed = strategy.run(state, panel_agents, analysis or {}, ctx)
if not round_completed:
    # ê³µí†µ í´ë°±: normal ë¼ìš´ë“œ 1íšŒ ì‹œë„ í›„ ê·¸ë˜ë„ ì‹¤íŒ¨ë©´ ê°•ì œ ë‹¤ìŒ ë¼ìš´ë“œ
    round_completed = STRATEGIES["continue_normal"].run(state, panel_agents, {}, ctx)
```

* ì¥ì : **ë¶„ê¸° í­ë°œ ë°©ì§€**, ê°œë³„ ë¼ìš´ë“œì˜ **ë…ë¦½ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥**, ì‹ ê·œ ë¼ìš´ë“œ íƒ€ì… ì¶”ê°€ ì‰¬ì›€.

---

## 3) **LLM ê²½ê³„ ê´€ë¦¬**: ë¶„ì„/ì§€ëª© ê²°ê³¼ì˜ ê²€ì¦ê³¼ í´ë°±

LLM ê²°ê³¼(`analyze_debate_state`, `analyze_manager_message`)ëŠ” **ë¶ˆì™„ì „/ëª¨í˜¸**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•­ìƒ ë°¸ë¦¬ë°ì´ì…˜ì„ ê±°ì¹˜ê³ , ì‹¤íŒ¨ ì‹œ í´ë°±í•©ë‹ˆë‹¤.

```python
def validate_analysis(analysis: dict, panel_agents: list) -> dict:
    out = dict(analysis or {})
    names = {a.name for a in panel_agents}
    # next_action ë³´ì •
    out["next_action"] = out.get("next_action") if out.get("next_action") in {
        "provoke_debate","focus_clash","change_angle","pressure_evidence","continue_normal"
    } else "continue_normal"
    # temperature ë³´ì •
    out["temperature"] = out.get("temperature") if out.get("temperature") in {
        "cold","stuck","neutral","heated"
    } else "neutral"
    # targeted_panels ì •í•©ì„±
    t = [p for p in out.get("targeted_panels", []) if p in names]
    out["targeted_panels"] = t
    return out
```

* `targeted_panels` ê°€ ë¹„ë©´ **ì „ëµ ë‚´ ê³µí†µ í´ë°±**(ì˜ˆ: `NormalRound`)ìœ¼ë¡œ ì¦‰ì‹œ ì „í™˜.
* `analysis_frequency` ë¡œ ì¸í•´ ë¶„ì„ì´ ë¹„ì–´ ìˆëŠ” ë¼ìš´ë“œì—ëŠ” **ê·¸ëƒ¥ Normal**.

---

## 4) **ì‹œê°„/ëœë¤ì„± ì˜ì¡´ì„± ë¶„ë¦¬** (í…ŒìŠ¤íŠ¸ì™€ ì¬í˜„ì„±)

* `time.sleep()` ì„ ê³³ê³³ì—ì„œ í˜¸ì¶œí•˜ë©´ í…ŒìŠ¤íŠ¸ê°€ ëŠë¦¬ê³  ë¶ˆì•ˆì •í•©ë‹ˆë‹¤. ë‹¤ìŒì²˜ëŸ¼ **ì£¼ì…(Injection)** í•˜ì„¸ìš”.

  ```python
  class Sleeper: 
      def sleep(self, sec: float): time.sleep(sec)

  def __init__(..., sleeper: Sleeper = None, rng: random.Random = None):
      self.sleeper = sleeper or Sleeper()
      self.rng = rng or random.Random()
  ```

  í…ŒìŠ¤íŠ¸ì—ì„œëŠ” `NoopSleeper` ë¥¼ ì£¼ì…í•´ ì§€ì—° ì œê±°, `random.Random(seed)` ë¡œ **ì¬í˜„ ê°€ëŠ¥ì„±** í™•ë³´.

---

## 5) **ì¶œë ¥/í”„ë ˆì  í…Œì´ì…˜ ê²½ë¡œ ë‹¨ì¼í™”**

* ëª¨ë“  í…ìŠ¤íŠ¸/êµ¬ë¶„ì„ /í—¤ë”ëŠ” `presenter` ë¥¼ í†µí•´ì„œë§Œ ì¶œë ¥.
* `print()` ì œê±°, `presenter.display_*` ë¡œ í†µì¼.
* ë¼ìš´ë“œ ì „í™˜/ì™„ë£Œ í‘œì‹œë„ `presenter.display_round_complete(round_no)` ê°™ì€ ë©”ì„œë“œë¡œ ì¶”ìƒí™”.

---

## 6) **ì„¤ì • ìŠ¤í‚¤ë§ˆ ê²€ì¦**(ì´ˆê¸°ì— ì‹¤íŒ¨í•˜ê²Œ)

* `pydantic`(ë˜ëŠ” ìµœì†Œí•œ ìˆ˜ë™ ê²€ì¦)ìœ¼ë¡œ `config` êµ¬ì¡°ë¥¼ ê°•ì œ:

  * `debate.mode âˆˆ {"static","dynamic"}`
  * `debate.debate_rounds: int >= 1`
  * `debate.dynamic_settings.max_rounds >= debate_rounds`
  * `analysis_frequency >= 1`
  * `intervention_threshold âˆˆ {"cold","stuck","neutral","heated"}` (ì‹¤ì œë¡œ ì‚¬ìš©)

ê²€ì¦ ì‹¤íŒ¨ ì‹œ **ì´ˆê¸°í™”ì—ì„œ ì˜ˆì™¸**ë¡œ ë¹ ë¥´ê²Œ ì‹¤íŒ¨í•˜ë„ë¡.

---

## 7) **ë¡œê¹… í‘œì¤€í™”(êµ¬ì¡°í™” ë¡œê¹…)**

* `logging` ì— JSON êµ¬ì¡°(ë¼ìš´ë“œ/íƒ€ì…/íƒ€ê²Ÿ/ì˜¨ë„/ì‹œê°„)ë¥¼ ë‚¨ê¸°ë©´ ì‚¬í›„ ë””ë²„ê¹…ì´ ì‰¬ì›Œì§‘ë‹ˆë‹¤.
* ê° ë°œí™”ì— `utterance_id`, ê° ë¼ìš´ë“œì— `round_id`(ì˜ˆ: `f"{round_no}-{round_type}"`) ë¶€ì—¬.

---

## 8) **ë°˜ë³µ/ì •ì²´ í•´ì†Œ ê·œì¹™ ëª…ì‹œì  ê´€ë¦¬**

* í˜„ì¬ â€œë¯¸ì™„ë£Œ ë¼ìš´ë“œ â†’ `current_round -= 1`â€ ë¡œ **ë¬´í•œ ë£¨í”„ ìœ„í—˜**ì´ ìˆìŠµë‹ˆë‹¤.
  ë¼ìš´ë“œë³„ **ì‹¤íŒ¨ í—ˆìš© íšŸìˆ˜(ì˜ˆ: 1íšŒ)** ë¥¼ ë‘ê³ , ì‹¤íŒ¨ ì‹œ ê°•ì œ `Normal` â†’ ê·¸ë˜ë„ ì‹¤íŒ¨ë©´ **ê·¸ ë¼ìš´ë“œëŠ” ì™„ë£Œ ì²˜ë¦¬**í•˜ê³  ë‹¤ìŒ ë¼ìš´ë“œë¡œ ë„˜ì–´ê°€ì„¸ìš”.
* â€œìƒˆë¡œìš´ ê´€ì (change\_angle) ì¿¨ë‹¤ìš´â€ ë“± **íˆìŠ¤í…Œë¦¬ì‹œìŠ¤**ëŠ” `DebateState` í•„ë“œë¡œ ì¼ì›í™”.

---

## 9) **ì‘ì€ ë¦¬íŒ©í† ë§/ì •ë¦¬ í¬ì¸íŠ¸**

* ë¬¸ìì—´ ìƒìˆ˜(ë¼ë²¨/í‚¤)ëŠ” **Enum** ë˜ëŠ” ìƒìˆ˜ ëª¨ë“ˆë¡œ ì¶”ì¶œ.
* `List` â†’ `List[PanelAgent]` ë“± **ì œë„¤ë¦­ íƒ€ì… ëª…ì‹œ**.
* `PanelHuman` ì™¸ì— **ê³µí†µ ì¸í„°í˜ì´ìŠ¤(Protocol/BaseClass)** ë¥¼ ëª…í™•íˆ í•´ IDE/íƒ€ì…ì²´ì»¤ ë„ì›€ì„ ë°›ìœ¼ì„¸ìš”.
* `ResponseGenerator` ê°€ â€œìŠ¤íŠ¸ë¦¬ë° ì¶œë ¥ë¨â€ì„ ì „ì œë¡œ ë¬¸ìì—´ ë°˜í™˜/ìŠ¤íŠ¸ë¦¬ë°ì„ ì„ì–´ ì“°ì§€ ë§ê³ ,
  **ë°˜í™˜ì€ í•­ìƒ ë¬¸ìì—´**ë¡œ í•˜ê³ , ìŠ¤íŠ¸ë¦¬ë°ì€ `presenter` ê°€ ë‹´ë‹¹í•˜ë„ë¡ ê²½ê³„ ë¶„ë¦¬.

---

## 10) **ìš°ì„ ìˆœìœ„ ì ìš© ì²´í¬ë¦¬ìŠ¤íŠ¸ (ê¶Œì¥ 1\~2ì¼)**

1. **ë²„ê·¸ í”½ìŠ¤**: ë“¤ì—¬ì“°ê¸°/`except`/ë°˜í™˜íƒ€ì…/ì‚½ì… ì¸ë±ìŠ¤/ë¯¸ì‚¬ìš© ë³€ìˆ˜ ì œê±°.
2. **ì¶œë ¥ ì¼ì›í™”**: `print()` ì œê±°, `presenter` ë¡œ í†µì¼.
3. **LLM ê²°ê³¼ ê²€ì¦ ë ˆì´ì–´**: `validate_analysis()` ì¶”ê°€ ë° ëª¨ë“  ì „ëµ ì§„ì… ì „ ì ìš©.
4. **ë¬´í•œë£¨í”„ ë°©ì§€**: ë¼ìš´ë“œ ì‹¤íŒ¨ í—ˆìš© 1íšŒ + í´ë°± Normal + ê°•ì œ ë¼ìš´ë“œ ì¢…ë£Œ.
5. **ë°ì´í„°ëª¨ë¸ ë„ì…**: `Statement`, `DebateState` ë¡œ êµì²´í•˜ê³  ì „ ë©”ì„œë“œ ì„œëª… ì •ë¦¬.
6. **ì „ëµ íŒ¨í„´ ë„ì…**: ë‹¤ì„¯ ë¼ìš´ë“œ ì „ëµ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬, ë§¤í•‘ í…Œì´ë¸”ë¡œ í˜¸ì¶œ.
7. **Sleep/Random ì£¼ì…**: í…ŒìŠ¤íŠ¸ì—ì„œ No-op/seed ì ìš©.
8. **Config ê²€ì¦**: ì´ˆê¸°í™” ì‹œ ìŠ¤í‚¤ë§ˆ ì²´í¬, ì‹¤íŒ¨ëŠ” ì¦‰ì‹œ ì˜ˆì™¸.

---

## (ì°¸ê³ ) ìµœì†Œ ìˆ˜ì • ì˜ˆì‹œ Diff ì¡°ê°

**a) `_conduct_clash_round` ë°˜í™˜/ë“¤ì—¬ì“°ê¸°**

```diff
-        enhanced_analysis['round_type'] = 'ì§ì ‘_ëŒ€ê²°'
-                        
-                        challenge_msg = self.response_generator.generate_dynamic_manager_response(
-                    context_info, enhanced_analysis, panel_agents, round_number
-                )
+        enhanced_analysis['round_type'] = 'ì§ì ‘_ëŒ€ê²°'
+        challenge_msg = self.response_generator.generate_dynamic_manager_response(
+            context_info, enhanced_analysis, panel_agents, round_number
+        )
         self.presenter.display_manager_message(challenge_msg)

-        if len(panel_agents) >= 2:
+        if len(panel_agents) >= 2:
             agent1, agent2 = panel_agents[0], panel_agents[1]
             other_agents = panel_agents[2:]
         else:
-            self._conduct_normal_round(round_number, panel_agents, analysis)
-            return
+            return self._conduct_normal_round(round_number, panel_agents, analysis)
```

**b) `_conduct_evidence_round` stray except ì œê±°**

```diff
-            if False:  # ë…¼ìŸ ì‹¬í™” ë¹„í™œì„±í™”
-                ...
-            except Exception as e:
-                if self.config['debate'].get('show_debug_info', False):
-                    print(f"ğŸ¯ [ë””ë²„ê·¸] ë…¼ìŸ ì‹¬í™” ë‹¨ê³„ì—ì„œ ì˜¤ë¥˜ ë°œìƒ, ë¼ìš´ë“œ ì¢…ë£Œ: {e}")
+            # (ë…¼ìŸ ì‹¬í™” ë¹„í™œì„±í™”: ì œê±°ë¨)
```

**c) ì‚¬ìš©ì íŒ¨ë„ ì‚½ì… ìœ„ì¹˜**

```diff
- insert_position = random.randint(1, len(panel_agents))
+ insert_position = random.randint(1, len(panel_agents) - 1)
```

**d) ë¯¸ì‚¬ìš© ë³€ìˆ˜ ì •ë¦¬ ë˜ëŠ” ì‹¤ì œ ë°˜ì˜**

```diff
- intervention_threshold = dynamic_settings.get('intervention_threshold', 'cold')
+ intervention_threshold = dynamic_settings.get('intervention_threshold', 'cold')
+ # ì˜ˆ: ì¡°ê¸° ì¢…ë£Œ ì¡°ê±´ì˜ ìµœì†Œ ì˜¨ë„ ì„ê³„ì¹˜ë¡œ ì‚¬ìš©
+ threshold_order = ["cold","stuck","neutral","heated"]
+ min_idx = threshold_order.index(intervention_threshold)
...
- if analysis and analysis.get('temperature') in ['cold', 'stuck']:
+ if analysis and threshold_order.index(analysis.get('temperature','neutral')) <= min_idx:
```

---

## ë§ˆë¬´ë¦¬

ìœ„ **ë²„ê·¸ í”½ìŠ¤ + ì „ëµ/ìƒíƒœ ë¶„ë¦¬**ë§Œìœ¼ë¡œë„ í† ë¡  íë¦„ ì œì–´ì˜ ì˜ˆì¸¡ ê°€ëŠ¥ì„±ì´ í¬ê²Œ ì˜¬ë¼ê°‘ë‹ˆë‹¤. ì´í›„ì—ëŠ” ê° ì „ëµì„ **ë…ë¦½ ìœ ë‹›í…ŒìŠ¤íŠ¸**ë¡œ ê²€ì¦í•˜ë©´ì„œ, LLM ë¶„ì„ ì‹¤íŒ¨ ì‹œ í´ë°±ì´ í•­ìƒ ì•ˆì „í•˜ê²Œ ì‘ë™í•˜ëŠ”ì§€(ë¬´í•œë£¨í”„ ë°©ì§€)ë§Œ ê¾¸ì¤€íˆ ì²´í¬í•˜ì‹œë©´ ì•ˆì •ì„±ì´ ë¹ ë¥´ê²Œ í™•ë³´ë©ë‹ˆë‹¤.

ì›í•˜ì‹œë©´, í˜„ì¬ ì½”ë“œë² ì´ìŠ¤ì— ë§ì¶˜ **ë¼ìš´ë“œ ì „ëµ ìŠ¤ì¼ˆë ˆí†¤ í´ë˜ìŠ¤**ì™€ `DebateState` ì ìš© íŒ¨ì¹˜ ì´ˆì•ˆì„ ë°”ë¡œ ë§Œë“¤ì–´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.
